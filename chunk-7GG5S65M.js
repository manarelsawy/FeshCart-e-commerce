import{a as S,b as l,c as y,d as C,f as x,g as _,h as O,i as F,j as N,l as E}from"./chunk-OHJIK5BS.js";import{e as b}from"./chunk-6ZCYXRR4.js";import{s as g,x as a}from"./chunk-RR6JAF5F.js";import{Ib as s,Pb as v,Ra as p,W as c,aa as n,da as u,ib as f,qb as i,rb as r,sb as m,zb as h}from"./chunk-FMPYM7VX.js";var I=(()=>{class t{constructor(){this._HttpClient=n(g),this.myHeaders={token:localStorage.getItem("userToken")}}checkOut(e,o){return this._HttpClient.post(`${a.baseURL}/api/v1/orders/checkout-session/${e}?url=${a.URLserver}`,{shippingAddress:o})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var T=(()=>{class t{constructor(){this._FormBuilder=n(N),this._ActivatedRoute=n(b),this._OrdersService=n(I),this.orders=this._FormBuilder.group({details:[null,[l.required]],phone:[null,[l.required,l.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[l.required]]}),this.cartId=""}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{console.log(e),this.cartId=e.get("id")},error:e=>{console.log(e)}})}orderSubmit(){console.log(this.orders.value),this._OrdersService.checkOut(this.cartId,this.orders.value).subscribe({next:e=>{console.log(e),e.status=="success"&&(e.session.url,window.open(e.session.url,"_self"))},error:e=>{console.log(e)}})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-orders"]],standalone:!0,features:[v],decls:18,vars:1,consts:[[1,"bg-main-light","shadow","p-2","my-2","mx-auto","rounded-4","w-75"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"my-1"],["for","details"],["formControlName","details","id","details",1,"form-control"],["for","phone"],["formControlName","phone","id","phone","type","number",1,"form-control"],["for","city"],["formControlName","city","id","city","type","text",1,"form-control"],["type","submit",1,"btn-main"]],template:function(o,d){o&1&&(i(0,"section",0)(1,"h1",1),s(2,"ShippingAddress"),r(),i(3,"form",2),h("ngSubmit",function(){return d.orderSubmit()}),i(4,"div",3)(5,"label",4),s(6,"Details"),r(),m(7,"textarea",5),r(),i(8,"div",3)(9,"label",6),s(10,"Phone"),r(),m(11,"input",7),r(),i(12,"div",3)(13,"label",8),s(14,"city"),r(),m(15,"input",9),r(),i(16,"button",10),s(17,"Check Out"),r()()()),o&2&&(p(3),f("formGroup",d.orders))},dependencies:[E,x,S,_,y,C,O,F]})}}return t})();export{T as OrdersComponent};
