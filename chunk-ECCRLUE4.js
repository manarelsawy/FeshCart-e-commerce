import{a as q,b as G}from"./chunk-A2ODOXJN.js";import{a as $}from"./chunk-2CCICHFP.js";import{a as U}from"./chunk-4O2H3TSK.js";import{a as J}from"./chunk-MKWN3SVT.js";import{a as W,c as j,e as z,k as R}from"./chunk-OHJIK5BS.js";import{a as H}from"./chunk-NZWNPLJ2.js";import"./chunk-XAZLOLJU.js";import{a as O}from"./chunk-OHNC77NK.js";import{h as V}from"./chunk-6ZCYXRR4.js";import"./chunk-RR6JAF5F.js";import{Ab as k,Ib as c,Jb as d,Lb as A,Mb as E,Na as b,Nb as L,Pb as M,Qb as I,Ra as n,Rb as B,Vb as p,Xb as u,aa as s,ab as _,da as C,gb as y,ib as v,lc as D,mb as T,na as x,nb as w,oa as P,ob as h,pb as S,qb as i,rb as o,sb as m,vb as F,zb as N}from"./chunk-FMPYM7VX.js";var K=(t,l)=>l._id,Q=t=>["/details",t],X=()=>[1,2,3,4,5];function Y(t,l){t&1&&(i(0,"span"),m(1,"i",13),o())}function Z(t,l){t&1&&m(0,"i",10)}function ee(t,l){if(t&1){let e=F();i(0,"div",3)(1,"div",4)(2,"div",5),m(3,"img",6),i(4,"h3",7),c(5),p(6,"termText"),o(),i(7,"h4",8),c(8),p(9,"termText"),o(),i(10,"div",9)(11,"span"),c(12),o(),i(13,"div"),h(14,Y,2,0,"span",null,w),y(16,Z,1,0,"i",10),i(17,"span",11),c(18),o()()()(),i(19,"button",12),N("click",function(){let a=x(e).$implicit,f=k();return P(f.addCart(a._id))}),c(20,"Add to cart"),o()()()}if(t&2){let e=l.$implicit;n(2),v("routerLink",B(14,Q,e._id)),n(),v("src",e.imageCover,b)("alt",e.title),n(2),d(u(6,8,e.category.name,1)),n(3),d(u(9,11,e.title,2)),n(4),d(e.price),n(2),S(I(16,X).slice(0,e.ratingsAverage)),n(2),T(16,e.ratingsAverage%1!==0?16:-1),n(2),d(e.ratingsAverage)}}var ge=(()=>{class t{constructor(){this._ProductsService=s(U),this._CategoriesService=s($),this._CartService=s(O),this._ToastrService=s(H),this._NgxSpinnerService=s(J),this.ProductsList=_([]),this.categoriesList=_([]),this.text="",this.countNum=D(()=>this._CartService.cartNum())}ngOnInit(){this._NgxSpinnerService.show("loading-3"),this._CategoriesService.getAllCategories().subscribe({next:e=>{console.log(e.data),this.categoriesList.set(e.data),this._NgxSpinnerService.hide("loading-3")},error:e=>{console.log(e)}}),this.getAllProductSub=this._ProductsService.getAllProducts().subscribe({next:e=>{console.log(e.data),this.ProductsList.set(e.data)},error:e=>{console.log(e)}})}ngOnDestroy(){this.getAllProductSub?.unsubscribe()}addCart(e){this._CartService.addProductToCart(e).subscribe({next:r=>{console.log(r),this._ToastrService.success(r.message,"Fresh Cart"),this._CartService.cartNum.set(r.numOfCartItems),console.log(this._CartService.cartNum())},error:r=>{console.log(r)}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-product"]],standalone:!0,features:[M],decls:8,vars:4,consts:[[1,"mt-4","mb-4"],["type","search","placeholder","Search By Name....",1,"form-control","w-50","mx-auto","my-3","shadow",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-2"],[1,"product","p-2"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100","card-btn",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(r,a){r&1&&(i(0,"section",0)(1,"h2"),c(2,"Popular Products :"),o(),i(3,"input",1),L("ngModelChange",function(g){return E(a.text,g)||(a.text=g),g}),o(),i(4,"div",2),h(5,ee,21,17,"div",3,K),p(7,"search"),o()()),r&2&&(n(3),A("ngModel",a.text),n(2),S(u(7,1,a.ProductsList().slice(0,12),a.text)))},dependencies:[V,q,R,W,j,z,G]})}}return t})();export{ge as ProductComponent};
