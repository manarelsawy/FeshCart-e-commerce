import{a as x}from"./chunk-YUDBLRDY.js";import{a as N,b as _,c as R,d as A,f as k,h as q,i as D,j as V,l as G}from"./chunk-OHJIK5BS.js";import{g as T,h as b}from"./chunk-6ZCYXRR4.js";import{h as y}from"./chunk-RR6JAF5F.js";import{Ab as h,Ib as m,Jb as w,Pb as L,Ra as a,Sb as v,aa as f,da as S,gb as g,ib as C,mb as u,qb as o,rb as n,sb as F,zb as E}from"./chunk-FMPYM7VX.js";var I=(e,s)=>({"is-valid":e,"is-invalid":s});function P(e,s){e&1&&(o(0,"p",14),m(1,"Email Is Required"),n())}function B(e,s){e&1&&(o(0,"p",14),m(1,"Enter Valid Email"),n())}function M(e,s){if(e&1&&(o(0,"div",6),g(1,P,2,0,"p",14)(2,B,2,0),n()),e&2){let i,d=h();a(),u(1,(i=d.loginFrom.get("email"))!=null&&i.getError("required")?1:(i=d.loginFrom.get("email"))!=null&&i.getError("email")?2:-1)}}function j(e,s){e&1&&(o(0,"p",14),m(1,"Password Is Required"),n())}function U(e,s){e&1&&(o(0,"p",14),m(1,"Enter Valid Password"),n())}function $(e,s){if(e&1&&(o(0,"div",6),g(1,j,2,0,"p",14)(2,U,2,0),n()),e&2){let i,d=h();a(),u(1,(i=d.loginFrom.get("password"))!=null&&i.getError("required")?1:(i=d.loginFrom.get("password"))!=null&&i.getError("pattern")?2:-1)}}function z(e,s){e&1&&(o(0,"span"),F(1,"i",15),n())}function H(e,s){if(e&1&&(o(0,"p",12),m(1),n()),e&2){let i=h();a(),w(i.msgError)}}function J(e,s){e&1&&(o(0,"p",13),m(1,"Success"),n())}var te=(()=>{class e{constructor(){this._AuthService=f(x),this._FormBuilder=f(V),this._Router=f(T),this.msgError="",this.msgSuccess=!1,this.isLoading=!1,this.loginFrom=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginFrom.valid?(this.isLoading=!0,this._AuthService.setLoginForm(this.loginFrom.value).subscribe({next:i=>{console.log(i),i.message==="success"&&(this.msgSuccess=!0,setTimeout(()=>{localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},2e3)),this.isLoading=!1},error:i=>{this.msgError=i.error.message,console.log(i),this.isLoading=!1}})):(this.loginFrom.setErrors({mismatch:!0}),this.loginFrom.markAllAsTouched())}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=S({type:e,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100","p-1"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main"],[1,"alert","alert-danger","w-50","m-0","p-1"],[1,"alert","alert-success"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(d,t){if(d&1&&(o(0,"section",0)(1,"h1",1),m(2,"Login Now :"),n(),o(3,"form",2),E("ngSubmit",function(){return t.loginSubmit()}),o(4,"div",3)(5,"label",4),m(6,"Email"),n(),F(7,"input",5),g(8,M,3,1,"div",6),n(),o(9,"div",3)(10,"label",7),m(11,"Password"),n(),F(12,"input",8),g(13,$,3,1,"div",6),n(),o(14,"div",9)(15,"a",10),m(16,"ForgotPassword"),n(),o(17,"button",11),m(18,"Register "),g(19,z,2,0,"span"),n()(),g(20,H,2,1,"p",12)(21,J,2,0,"p",13),n()()),d&2){let l,p,r,c;a(3),C("formGroup",t.loginFrom),a(4),C("ngClass",v(8,I,!((l=t.loginFrom.get("email"))!=null&&l.errors)&&(((l=t.loginFrom.get("email"))==null?null:l.touched)||((l=t.loginFrom.get("email"))==null?null:l.dirty)),((l=t.loginFrom.get("email"))==null?null:l.errors)&&(((l=t.loginFrom.get("email"))==null?null:l.touched)||((l=t.loginFrom.get("email"))==null?null:l.dirty)))),a(),u(8,(p=t.loginFrom.get("email"))!=null&&p.errors&&((p=t.loginFrom.get("email"))!=null&&p.touched||(p=t.loginFrom.get("email"))!=null&&p.dirty)?8:-1),a(4),C("ngClass",v(11,I,!((r=t.loginFrom.get("password"))!=null&&r.errors)&&(((r=t.loginFrom.get("password"))==null?null:r.touched)||((r=t.loginFrom.get("password"))==null?null:r.dirty)),((r=t.loginFrom.get("password"))==null?null:r.errors)&&(((r=t.loginFrom.get("password"))==null?null:r.touched)||((r=t.loginFrom.get("password"))==null?null:r.dirty)))),a(),u(13,(c=t.loginFrom.get("password"))!=null&&c.errors&&((c=t.loginFrom.get("password"))!=null&&c.touched||(c=t.loginFrom.get("password"))!=null&&c.dirty)?13:-1),a(6),u(19,t.isLoading?19:-1),a(),u(20,t.msgError?20:-1),a(),u(21,t.msgSuccess?21:-1)}},dependencies:[G,k,N,R,A,q,D,y,b]})}}return e})();export{te as LoginComponent};
