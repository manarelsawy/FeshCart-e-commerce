import{a as y}from"./chunk-YUDBLRDY.js";import{a as b,b as a,c as E,d as F,f as V,h as P,i as N,j as T,l as G}from"./chunk-OHJIK5BS.js";import{g as x}from"./chunk-6ZCYXRR4.js";import"./chunk-RR6JAF5F.js";import{Ab as m,Ib as s,Pb as S,Ra as d,aa as p,da as v,gb as w,ib as l,mb as h,na as c,oa as f,qb as r,rb as t,sb as u,vb as _,zb as C}from"./chunk-FMPYM7VX.js";function B(i,g){if(i&1){let e=_();r(0,"form",2),C("ngSubmit",function(){c(e);let n=m();return f(n.verifyEmailSubmit())}),r(1,"div",3)(2,"label",4),s(3,"email"),t(),u(4,"input",5),t(),r(5,"button",6),s(6,"Verfiy Email"),t()()}if(i&2){let e=m();l("formGroup",e.verifyEmail),d(5),l("disabled",e.verifyEmail.invalid)}}function D(i,g){if(i&1){let e=_();r(0,"form",2),C("ngSubmit",function(){c(e);let n=m();return f(n.verifyCodeSubmit())}),r(1,"div",3)(2,"label",7),s(3,"resetCode"),t(),u(4,"input",8),t(),r(5,"button",6),s(6,"Verifyy Code"),t()()}if(i&2){let e=m();l("formGroup",e.verifyCode),d(5),l("disabled",e.verifyCode.invalid)}}function R(i,g){if(i&1){let e=_();r(0,"form",2),C("ngSubmit",function(){c(e);let n=m();return f(n.resetPasswordSubmit())}),r(1,"div",3)(2,"label",4),s(3,"email"),t(),u(4,"input",9),t(),r(5,"div",3)(6,"label",10),s(7,"newPassword"),t(),u(8,"input",11),t(),r(9,"button",6),s(10,"Verfiy Email"),t()()}if(i&2){let e=m();l("formGroup",e.resetPassword),d(9),l("disabled",e.resetPassword.invalid)}}var U=(()=>{class i{constructor(){this._FormBuilder=p(T),this._uthService=p(y),this._Router=p(x),this.step=1,this.verifyEmail=this._FormBuilder.group({email:[null,[a.required,a.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[a.required,a.pattern(/^\w{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[a.required,a.email]],newPassword:[null,[a.required,a.pattern(/^\w{6,}$/)]]})}verifyEmailSubmit(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._uthService.setEmailVerify(this.verifyEmail.value).subscribe({next:o=>{console.log(o),o.statusMsg=="success"&&(this.step=2)},error:o=>{console.log(o)}})}verifyCodeSubmit(){this._uthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status=="Success"&&(this.step=3)},error:e=>{console.log(e)}})}resetPasswordSubmit(){this._uthService.setResetPass(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("userToken",e.token),this._uthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-forgotpassword"]],standalone:!0,features:[S],decls:6,vars:1,consts:[[1,"text-center","text-main","mu-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"btn-main",3,"disabled"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["readonly","","formControlName","email","type","email","id","email",1,"form-control"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control"]],template:function(o,n){o&1&&(r(0,"section")(1,"h1",0),s(2,"Forgot Password"),t(),w(3,B,7,2,"form",1)(4,D,7,2)(5,R,11,2),t()),o&2&&(d(3),h(3,n.step==1?3:n.step==2?4:n.step==3?5:-1))},dependencies:[G,V,b,E,F,P,N]})}}return i})();export{U as ForgotpasswordComponent};
